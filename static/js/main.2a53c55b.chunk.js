(this["webpackJsonpform-validation-demo"]=this["webpackJsonpform-validation-demo"]||[]).push([[0],{104:function(e,n,t){"use strict";t.r(n);var a=t(2),r=t.n(a),c=t(87),o=t.n(c),i=(t(97),t(98),t(38)),u=t(76),s=(t(80),t(105)),l=t(89),m=function(e){var n=e.name,t=e.value,a=e.error,c=e.showLabel,o=void 0===c||c,i=e.disabled,u=e.onBlur,m=e.onFocus,d=e.onChange;return r.a.createElement("div",null,r.a.createElement(s.a.Group,{as:l.a},o&&r.a.createElement(s.a.Label,null,n),r.a.createElement(s.a.Control,{type:"text",placeholder:n,required:!0,value:t,onBlur:u,onFocus:m,isInvalid:null!==a,disabled:i,onChange:function(e){return d(e.target.value)}}),null!==a?r.a.createElement(s.a.Control.Feedback,{type:"invalid"},a):null))},d=t(90),b=t(77),f=t(84),p=t(83),v=t(82),j=t(41),O=t(14),w=t(21),h=t(42),E=t(85),$=t(62),g=t(66),C=t(49),k=t(17),A=t(106);function P(e){return e.match(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/g)?null:"Invalid hostname format"}function F(e){return""===e?"Should not be empty":null}function S(e){return function(e){return new Promise((function(n,t){setTimeout((function(){n({isSuccess:!1,errors:{name:{value:e.name,error:F(e.name)||void 0},password:{value:e.password,error:F(e.password)||void 0},confirmPassword:{value:e.confirmPassword,error:F(e.confirmPassword)||e.password!==e.confirmPassword?"Passwords didn't match":void 0},accounts:e.accounts.map((function(e){return{sitename:{value:e.sitename,error:F(e.sitename)||P(e.sitename)||void 0},username:{value:e.username,error:F(e.username)||("user"===e.username?"User already exists":void 0)}}}))}})}),800)}))}(e).then((function(n){return n.isSuccess?n:{isSuccess:!1,errors:{name:n.errors.name,password:n.errors.password,confirmPassword:n.errors.confirmPassword,accounts:n.errors.accounts.map((function(n,t){return{id:e.accounts[t].id,sitename:n.sitename,username:n.username}}))}}}))}function y(e){return!e.isSuccess}function B(){return Math.random().toString().slice(-8)}function z(e){return C.b.apply(void 0,Object(u.a)(e))}function R(){var e=Object(b.createHandler)(),n=Object(b.createHandler)(),t=n.value$.pipe(Object(f.a)(!1),Object(p.a)(1)),a=n.value$.pipe(Object(v.a)(!0),Object(f.a)(!1),Object(p.a)(1));return{value$:e.value$.pipe(Object(f.a)(""),Object(p.a)(1)),isFocused$:t,isVisited$:a,onChange:function(n){return e.handle(n)},onBlur:function(){return n.handle(!1)},onFocus:function(){return n.handle(!0)}}}function Z(){var e=new $.a((function(e){return e}));return{list$:e.pipe(Object(f.a)((function(e){return e})),Object(j.a)((function(e,n){return n(e)}),[]),Object(p.a)(1)),onAddClick:function(){var n="".concat(B(),"-").concat(B(),"-").concat(B());e.next((function(e){return[].concat(Object(u.a)(e),[{id:n,item:{sitename:R(),username:R()}}])}))},onRemoveClick:function(n){return e.next((function(e){return e.filter((function(e){return e.id!==n}))}))}}}function x(e,n,t){var a=e.value$,r=e.isFocused$,c=e.onFocus,o=e.onBlur,u=e.onChange,s=Object(g.a)(n.pipe(Object(O.a)((function(e){return e||null})),Object(f.a)(null)),r.pipe(Object(w.a)((function(e){return e})),Object(v.a)(null))),l=Object(C.b)(s,t).pipe(Object(O.a)((function(e){var n=Object(i.a)(e,2),t=n[0],a=n[1];return t||a})));return Object(C.b)(a,l).pipe(Object(O.a)((function(e){var n=Object(i.a)(e,2);return{value:n[0],error:n[1],onChange:u,onFocus:c,onBlur:o}})))}function L(e,n){return x(e,n,H(e))}function G(e,n){return Object(C.b)(e.value$,e.isFocused$,e.isVisited$).pipe(Object(O.a)((function(e){var t=Object(i.a)(e,3),a=t[0],r=t[1],c=t[2];return!r&&c?n(a):null})))}function H(e){return G(e,(function(e){return""===e?"Empty!":null}))}function I(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return z(n).pipe(Object(O.a)((function(e){return e.reduce((function(e,n){return e||n}),null)})))}var V=Object(d.withRX)((function(e){var n=e.name,t=e.password,a=e.confirmPassword,c=e.accounts,o=e.isSending,i=e.onAddAccountClick,u=e.onRemoveAccountClick,d=e.onSubmitClick;return r.a.createElement("div",null,r.a.createElement(m,Object.assign({name:"Name"},n,{disabled:o})),r.a.createElement(m,Object.assign({name:"Password"},t,{disabled:o})),r.a.createElement(m,Object.assign({name:"ConfirmPassword"},a,{disabled:o})),r.a.createElement(s.a.Row,{as:l.a},r.a.createElement(l.a,null,r.a.createElement(s.a.Label,null,"Accounts:"))),c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(s.a.Row,null,r.a.createElement(l.a,null,r.a.createElement(m,Object.assign({name:"Sitename"},e.sitename,{showLabel:!1,disabled:o}))),r.a.createElement(l.a,null,r.a.createElement(m,Object.assign({name:"Username"},e.username,{showLabel:!1,disabled:o}))),r.a.createElement(l.a,null,r.a.createElement(A.a,{variant:"dark",onClick:function(){return u(e.id)},disabled:o},"Remove"))))})),r.a.createElement(s.a.Group,{as:l.a},r.a.createElement(A.a,{variant:"primary",onClick:i,disabled:o},"Add account")),r.a.createElement(s.a.Group,{as:l.a},r.a.createElement(A.a,{variant:"primary",onClick:d,disabled:o},"Submit")))}))((function(e){var n,t,a=R(),r=R(),c=R(),o=Z(),u=Object(C.b)(a.value$,r.value$,c.value$,o.list$).pipe(Object(h.a)((function(e){var n=Object(i.a)(e,4),t=n[0],a=n[1],r=n[2];return z(n[3].map((function(e){return Object(C.b)(e.item.sitename.value$,e.item.username.value$).pipe(Object(O.a)((function(n){var t=Object(i.a)(n,2);return{sitename:t[0],username:t[1],id:e.id}})))}))).pipe(Object(f.a)([]),Object(O.a)((function(e){return{name:t,password:a,confirmPassword:r,accounts:e}})))}))),s=Object(b.createHandler)(),l=s.value$.pipe(Object(E.a)(u)).pipe(Object(h.a)((function(e){var n=Object(i.a)(e,2),t=(n[0],n[1]);return Object(k.a)(S(t))})),Object(p.a)(1)),m=Object(g.a)(s.value$.pipe(Object(v.a)(!0)),l.pipe(Object(v.a)(!1))),d=l.pipe(Object(w.a)(y),Object(O.a)((function(e){return e.errors}))),j=L(a,d.pipe(Object(O.a)((function(e){return e.name.error})))),$=L(r,d.pipe(Object(O.a)((function(e){return e.password.error})))),A=x(c,d.pipe(Object(O.a)((function(e){return e.confirmPassword.error}))),I(H(c),(n=c,t=r,Object(C.b)(n.value$,n.isFocused$,n.isVisited$,t.value$).pipe(Object(O.a)((function(e){var n=Object(i.a)(e,4),t=n[0],a=n[1],r=n[2];return t!==n[3]&&!a&&r?"Passwords should match":null})))))),F=o.list$.pipe(Object(h.a)((function(e){return z(e.map((function(e){var n=d.pipe(Object(O.a)((function(n){return n.accounts.find((function(n){return n.id===e.id}))})));return Object(C.b)(x(e.item.sitename,n.pipe(Object(O.a)((function(e){return e?e.sitename.error:void 0}))),I(H(e.item.sitename),G(e.item.sitename,P))),L(e.item.username,n.pipe(Object(O.a)((function(e){return e?e.username.error:void 0}))))).pipe(Object(O.a)((function(n){var t=Object(i.a)(n,2);return{sitename:t[0],username:t[1],id:e.id}})))})))})));return{defaultProps:{name:{value:"",error:null,onChange:function(e){},onBlur:function(){},onFocus:function(){}},password:{value:"",error:null,onChange:function(e){},onBlur:function(){},onFocus:function(){}},confirmPassword:{value:"",error:null,onChange:function(e){},onBlur:function(){},onFocus:function(){}},accounts:[],isSending:!1,onAddAccountClick:o.onAddClick,onRemoveAccountClick:o.onRemoveClick,onSubmitClick:function(){return s.handle()}},props:{name:j,password:$,confirmPassword:A,accounts:F,isSending:m}}})),J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,n,t){e.exports=t(104)},97:function(e,n,t){},98:function(e,n,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.2a53c55b.chunk.js.map