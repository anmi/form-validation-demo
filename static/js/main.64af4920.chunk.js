(this["webpackJsonpform-validation-demo"]=this["webpackJsonpform-validation-demo"]||[]).push([[0],{104:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(87),c=t.n(o),i=(t(97),t(98),t(38)),u=t(76),s=(t(80),t(105)),l=t(89),m=function(e){var n=e.name,t=e.value,a=e.error,o=e.showLabel,c=void 0===o||o,i=e.disabled,u=e.onBlur,m=e.onFocus,d=e.onChange;return r.a.createElement("div",null,r.a.createElement(s.a.Group,{as:l.a},c&&r.a.createElement(s.a.Label,null,n),r.a.createElement(s.a.Control,{type:"text",placeholder:n,required:!0,value:t,onBlur:u,onFocus:m,isInvalid:null!==a,disabled:i,onChange:function(e){return d(e.target.value)}}),null!==a?r.a.createElement(s.a.Control.Feedback,{type:"invalid"},a):null))},d=t(90),b=t(77),f=t(84),p=t(83),v=t(82),j=t(41),O=t(14),w=t(21),h=t(42),E=t(85),g=t(62),$=t(66),C=t(49),k=t(17),A=t(106);function P(e){return e.match(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/g)?null:"Invalid hostname format"}function y(e){return""===e?"Should not be empty":null}function F(e){return function(e){return new Promise((function(n,t){setTimeout((function(){n({isSuccess:!1,errors:{name:{value:e.name,error:y(e.name)||void 0},password:{value:e.password,error:y(e.password)||void 0},confirmPassword:{value:e.confirmPassword,error:y(e.confirmPassword)||e.password!==e.confirmPassword?"Passwords didn't match":void 0},accounts:e.accounts.map((function(e){return{sitename:{value:e.sitename,error:y(e.sitename)||P(e.sitename)||void 0},username:{value:e.username,error:y(e.username)||("user"===e.username?"User already exists":void 0)}}}))}})}),800)}))}(e).then((function(n){return n.isSuccess?n:{isSuccess:!1,errors:{name:n.errors.name,password:n.errors.password,confirmPassword:n.errors.confirmPassword,accounts:n.errors.accounts.map((function(n,t){return{id:e.accounts[t].id,sitename:n.sitename,username:n.username}}))}}}))}function S(e){return!e.isSuccess}function B(){return Math.random().toString().slice(-8)}function z(e){return C.b.apply(void 0,Object(u.a)(e))}function R(){var e=Object(b.createHandler)(),n=Object(b.createHandler)(),t=n.value$.pipe(Object(f.a)(!1),Object(p.a)(1)),a=n.value$.pipe(Object(v.a)(!0),Object(f.a)(!1),Object(p.a)(1));return{value$:e.value$.pipe(Object(f.a)(""),Object(p.a)(1)),isFocused$:t,isVisited$:a,onChange:function(n){return e.handle(n)},onBlur:function(){return n.handle(!1)},onFocus:function(){return n.handle(!0)}}}function Z(){var e=new g.a((function(e){return e}));return{list$:e.pipe(Object(f.a)((function(e){return e})),Object(j.a)((function(e,n){return n(e)}),[]),Object(p.a)(1)),onAddClick:function(){var n="".concat(B(),"-").concat(B(),"-").concat(B());e.next((function(e){return[].concat(Object(u.a)(e),[{id:n,item:{sitename:R(),username:R()}}])}))},onRemoveClick:function(n){return e.next((function(e){return e.filter((function(e){return e.id!==n}))}))}}}function x(e,n,t){var a=e.value$,r=e.isFocused$,o=e.onFocus,c=e.onBlur,u=e.onChange,s=Object($.a)(n.pipe(Object(O.a)((function(e){return e||null})),Object(f.a)(null)),r.pipe(Object(w.a)((function(e){return e})),Object(v.a)(null))),l=Object(C.b)(s,t).pipe(Object(O.a)((function(e){var n=Object(i.a)(e,2),t=n[0],a=n[1];return t||a})));return Object(C.b)(a,l).pipe(Object(O.a)((function(e){var n=Object(i.a)(e,2);return{value:n[0],error:n[1],onChange:u,onFocus:o,onBlur:c}})))}function L(e,n){return x(e,n,G(e))}function V(e,n){return Object(C.b)(e.value$,e.isFocused$,e.isVisited$).pipe(Object(O.a)((function(e){var t=Object(i.a)(e,3),a=t[0],r=t[1],o=t[2];return!r&&o?n(a):null})))}function G(e){return V(e,(function(e){return""===e?"Empty!":null}))}function H(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return z(n).pipe(Object(O.a)((function(e){return e.reduce((function(e,n){return e||n}),null)})))}var I=Object(d.withRX)((function(e){var n=e.name,t=e.password,a=e.confirmPassword,o=e.accounts,c=e.isSending,i=e.onAddAccountClick,u=e.onRemoveAccountClick,d=e.onSubmitClick;return r.a.createElement("div",null,r.a.createElement(m,Object.assign({name:"Name"},n,{disabled:c})),r.a.createElement(m,Object.assign({name:"Password"},t,{disabled:c})),r.a.createElement(m,Object.assign({name:"ConfirmPassword"},a,{disabled:c})),r.a.createElement(s.a.Row,{as:l.a},r.a.createElement(l.a,null,r.a.createElement(s.a.Label,null,"Accounts:"))),o.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(s.a.Row,null,r.a.createElement(l.a,null,r.a.createElement(m,Object.assign({name:"Sitename"},e.sitename,{showLabel:!1,disabled:c}))),r.a.createElement(l.a,null,r.a.createElement(m,Object.assign({name:"Username"},e.username,{showLabel:!1,disabled:c}))),r.a.createElement(l.a,null,r.a.createElement(A.a,{variant:"dark",onClick:function(){return u(e.id)},disabled:c},"Remove"))))})),r.a.createElement(s.a.Group,{as:l.a},r.a.createElement(A.a,{variant:"primary",onClick:i,disabled:c},"Add account")),r.a.createElement(s.a.Group,{as:l.a},r.a.createElement(A.a,{variant:"primary",onClick:d,disabled:c},"Submit")))}))((function(e){var n,t,a=R(),r=R(),o=R(),c=Z(),u=Object(C.b)(a.value$,r.value$,o.value$,c.list$).pipe(Object(h.a)((function(e){var n=Object(i.a)(e,4),t=n[0],a=n[1],r=n[2];return z(n[3].map((function(e){return Object(C.b)(e.item.sitename.value$,e.item.username.value$).pipe(Object(O.a)((function(n){var t=Object(i.a)(n,2);return{sitename:t[0],username:t[1],id:e.id}})))}))).pipe(Object(f.a)([]),Object(O.a)((function(e){return{name:t,password:a,confirmPassword:r,accounts:e}})))}))),s=Object(b.createHandler)(),l=s.value$.pipe(Object(E.a)(u)).pipe(Object(h.a)((function(e){var n=Object(i.a)(e,2),t=(n[0],n[1]);return Object(k.a)(F(t))})),Object(p.a)(1)),m=Object($.a)(s.value$.pipe(Object(v.a)(!0)),l.pipe(Object(v.a)(!1))),d=l.pipe(Object(w.a)(S),Object(O.a)((function(e){return e.errors}))),j=L(a,d.pipe(Object(O.a)((function(e){return e.name.error})))),g=L(r,d.pipe(Object(O.a)((function(e){return e.password.error})))),A=x(o,d.pipe(Object(O.a)((function(e){return e.confirmPassword.error}))),H(G(o),(n=o,t=r,Object(C.b)(n.value$,n.isFocused$,n.isVisited$,t.value$).pipe(Object(O.a)((function(e){var n=Object(i.a)(e,4),t=n[0],a=n[1],r=n[2];return t!==n[3]&&!a&&r?"Passwords should match":null})))))),y=c.list$.pipe(Object(h.a)((function(e){return z(e.map((function(e){var n=d.pipe(Object(O.a)((function(n){return n.accounts.find((function(n){return n.id===e.id}))})));return Object(C.b)(x(e.item.sitename,n.pipe(Object(O.a)((function(e){return e?e.sitename.error:void 0}))),H(G(e.item.sitename),V(e.item.sitename,P))),L(e.item.username,n.pipe(Object(O.a)((function(e){return e?e.username.error:void 0}))))).pipe(Object(O.a)((function(n){var t=Object(i.a)(n,2);return{sitename:t[0],username:t[1],id:e.id}})))})))})));return{defaultProps:{name:{value:"",error:null,onChange:function(e){},onBlur:function(){},onFocus:function(){}},password:{value:"",error:null,onChange:function(e){},onBlur:function(){},onFocus:function(){}},confirmPassword:{value:"",error:null,onChange:function(e){},onBlur:function(){},onFocus:function(){}},accounts:[],isSending:!1,onAddAccountClick:c.onAddClick,onRemoveAccountClick:c.onRemoveClick,onSubmitClick:function(){return s.handle()}},props:{name:j,password:g,confirmPassword:A,accounts:y,isSending:m}}})),J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("p",{style:{padding:20}},"Visit github page:",r.a.createElement("a",{href:"https://github.com/anmi/form-validation-demo",target:"_blank"},"anmi/form-validation-demo"),"."),r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,n,t){e.exports=t(104)},97:function(e,n,t){},98:function(e,n,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.64af4920.chunk.js.map